"""
벡터 DB 초기화 스크립트
음식점 메뉴 데이터를 벡터 DB에 저장

이 파일의 역할:
- ChromaDB 벡터 데이터베이스를 초기화하고 데이터를 로드
- MySQL에서 음식점 메뉴 데이터를 가져와 벡터로 변환하여 저장
- RAG 시스템이 사용할 검색 가능한 데이터를 준비

왜 필요한가:
- 애플리케이션 시작 전에 벡터 DB를 준비해야 함
- 음식점 메뉴 정보가 변경되면 벡터 DB도 업데이트 필요
- 배치 작업으로 대량의 데이터를 한 번에 처리
- 초기 설정 및 데이터 마이그레이션 시 사용

주요 기능:
- init_vectorstore(): 벡터 저장소 초기화 메인 함수
- format_restaurant_document(): 음식점 정보를 검색 가능한 텍스트로 변환
  - 음식점명, 주소, 설명, 카테고리, 메뉴 목록, 가격, 알레르기 정보, 영양 정보 포함

실행 흐름:
1. 기존 벡터 저장소 삭제 (초기화)
2. MySQL 데이터베이스에서 음식점 및 메뉴 데이터 조회
3. 데이터가 없으면 샘플 데이터 파일(sample_menu.json) 사용
4. 각 음식점 정보를 문서 형식으로 변환
5. 문서를 벡터로 변환하여 ChromaDB에 저장
6. 메타데이터(음식점 ID, 이름, 카테고리)와 함께 저장
7. 테스트 검색 수행하여 정상 작동 확인

언제 실행하나:
- 프로젝트 최초 설정 시
- 음식점/메뉴 데이터가 대량으로 변경되었을 때
- 벡터 DB가 손상되었을 때 재구축
- 정기적인 데이터 동기화 작업 (cron 등)

데이터 소스:
1. MySQL 데이터베이스 (우선순위)
   - restaurants 테이블
   - menus 테이블
2. 샘플 데이터 파일 (백업)
   - backend/data/sample_menu.json

사용 방법:
- python scripts/init_vectorstore.py
- 또는 스크립트로 실행
"""
